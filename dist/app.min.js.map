{"version":3,"sources":["app.js"],"names":["_airport","_interopRequireDefault","require","_axios","_blog","_chauffeur","_cors","_dotenv","_enquiry","_express","_order","_orderRental","_path","_static","_upload","_admin","_error","_expressFileupload","_bodyParser","dotenv","config","app","__dirname","path","resolve","use","express","json","get","req","res","_req$params","params","p1","p2","axios","concat","process","env","GMAP_KEY","Access-Control-Allow-Origin","then","response","duration","data","rows","elements","text","distance","split","error","console","log","user","order","orderRental","staticData","blog","enquiry","send","PAYPAL_CLIENT_ID","join","sendFile","status","NODE_ENV","airport","dburl","MONGO_URI","frontend_dir","errorHandler","listen","PORT"],"mappings":"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","file":"app.min.js","sourcesContent":["// import uploadRoutes from \"./routes/uploadRoutes.js\";\r\nimport airport from \"./server/api/routes/airport.js\";\r\nimport axios from \"axios\";\r\nimport blog from \"./server/api/routes/blog.js\";\r\nimport chauffeur from \"./server/api/routes/chauffeur.js\";\r\nimport \"./server/database/connectDB.js\";\r\nimport cors from \"cors\";\r\nimport dotenv from \"dotenv\";\r\nimport enquiry from \"./server/api/routes/enquiry.js\";\r\nimport express from \"express\";\r\nimport order from \"./server/api/routes/order.js\";\r\nimport orderRental from \"./server/api/routes/orderRental.js\";\r\nimport path from \"path\";\r\nimport staticData from \"./server/api/routes/static.js\";\r\nimport upload from \"./server/api/routes/upload.js\";\r\nimport user from \"./server/api/routes/admin.js\";\r\nimport { notFound, errorHandler } from \"./server/util/error.js\";\r\nimport fileupload from 'express-fileupload' \r\nimport bodyParser  from 'body-parser' \r\n\r\n\r\ndotenv.config();\r\nconst app = express();\r\nconst __dirname = path.resolve();\r\n\r\napp.use(express.json());\r\napp.use(cors());  \r\n\r\n\r\napp.get(\"/api/directions/:p1/:p2\", (req, res) => {\r\n  const { p1, p2 } = req.params;\r\n  axios\r\n    .get(`https://maps.googleapis.com/maps/api/distancematrix/json?destinations=${p1}&origins=${p2}&key=${process.env.GMAP_KEY}`, {\"Access-Control-Allow-Origin\": \"*\",} )\r\n    .then(function (response) {\r\n      // console.log(response)\r\n      res.json({\r\n        duration: response.data.rows[0].elements[0].duration.text,\r\n        distance: response.data.rows[0].elements[0].distance.text.split(\" \")[0],\r\n      });\r\n    })\r\n    .catch(function (error) {console.log(error); })\r\n    .then(function () {\r\n      // always executed\r\n    });\r\n});\r\n\r\napp.use(\"/api/users\", user);\r\napp.use(\"/api/chauffeurs\", chauffeur);\r\napp.use(\"/api/orders\", order);\r\napp.use(\"/api/rental\", orderRental);\r\napp.use(\"/api/airports\", airport);\r\napp.use(\"/api/data\", staticData);\r\napp.use(\"/api/blogs\", blog);\r\napp.use(\"/api/enquiries\", enquiry);\r\napp.get(\"/api/config/paypal\", (req, res) => {res.send(process.env.PAYPAL_CLIENT_ID); });\r\n\r\napp.use(\"/api/upload\", upload);\r\napp.use(\"/uploads\", express.static(path.join(__dirname, \"/uploads\")));\r\napp.get('/uploadtester',(req,res)=>{res.sendFile(__dirname +'/tests/uploadform.html')})\r\n\r\n// -----PANELS\r\napp.use('/admin', express.static('./admin')) // frontend admin static folder\r\napp.use('/driver', express.static('./driver')) // frontend driver static folder\r\napp.use('/utilities', express.static('./utilities')) // utilities\r\n\r\n\r\napp.get('/101fd5534aad34d24acdd10fb99d2523.html', (req, res) => res.status(200).send('')); //verification\r\n\r\nvar frontend_dir='home/' \r\nif (process.env.NODE_ENV=='dev') {\r\n  console.log('THIS IS DEVELOPMENT SERVER')\r\n  app.get('/api/info', (req, res) => res.send({dburl:process.env.MONGO_URI}));\r\n  // frontend_dir='home-src/public/'\r\n}\r\n\r\n// -----REACT RESOLVER\r\napp.use(express.static(path.join(__dirname,frontend_dir)));\r\napp.get('*', (req, res) => res.sendFile(path.join(__dirname,frontend_dir+'index.html')));\r\n\r\n// Custom Error handling\r\napp.use(fileupload());\r\napp.use(notFound);\r\napp.use(errorHandler);\r\n\r\nconst PORT = process.env.PORT || 5000;\r\napp.listen(PORT,\r\n  console.log(`Server running in ${process.env.NODE_ENV} mode on port ${PORT}`)\r\n);\r\n"]}