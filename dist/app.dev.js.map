{"version":3,"sources":["app.js"],"names":["dotenv","config","app","__dirname","path","resolve","use","express","json","get","req","res","params","p1","p2","axios","process","env","GMAP_KEY","then","response","duration","data","rows","elements","text","distance","split","error","console","log","user","chauffeur","order","orderRental","airport","staticData","blog","enquiry","send","PAYPAL_CLIENT_ID","upload","join","sendFile","status","frontend_dir","NODE_ENV","dburl","MONGO_URI","notFound","errorHandler","PORT","listen"],"mappings":"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","sourcesContent":["// import uploadRoutes from \"./routes/uploadRoutes.js\";\r\nimport airport from \"./server/api/routes/airport.js\";\r\nimport axios from \"axios\";\r\nimport blog from \"./server/api/routes/blog.js\";\r\nimport chauffeur from \"./server/api/routes/chauffeur.js\";\r\nimport \"./server/database/connectDB.js\";\r\nimport cors from \"cors\";\r\nimport dotenv from \"dotenv\";\r\nimport enquiry from \"./server/api/routes/enquiry.js\";\r\nimport express from \"express\";\r\nimport order from \"./server/api/routes/order.js\";\r\nimport orderRental from \"./server/api/routes/orderRental.js\";\r\nimport path from \"path\";\r\nimport staticData from \"./server/api/routes/static.js\";\r\nimport upload from \"./server/api/routes/upload.js\";\r\nimport user from \"./server/api/routes/admin.js\";\r\nimport { notFound, errorHandler } from \"./server/util/error.js\";\r\nimport fileupload from 'express-fileupload' \r\nimport bodyParser  from 'body-parser' \r\n\r\n\r\ndotenv.config();\r\nconst app = express();\r\nconst __dirname = path.resolve();\r\n\r\napp.use(express.json());\r\napp.use(cors());  \r\n\r\n\r\napp.get(\"/api/directions/:p1/:p2\", (req, res) => {\r\n  const { p1, p2 } = req.params;\r\n  axios\r\n    .get(`https://maps.googleapis.com/maps/api/distancematrix/json?destinations=${p1}&origins=${p2}&key=${process.env.GMAP_KEY}`, {\"Access-Control-Allow-Origin\": \"*\",} )\r\n    .then(function (response) {\r\n      // console.log(response)\r\n      res.json({\r\n        duration: response.data.rows[0].elements[0].duration.text,\r\n        distance: response.data.rows[0].elements[0].distance.text.split(\" \")[0],\r\n      });\r\n    })\r\n    .catch(function (error) {console.log(error); })\r\n    .then(function () {\r\n      // always executed\r\n    });\r\n});\r\n\r\napp.use(\"/api/users\", user);\r\napp.use(\"/api/chauffeurs\", chauffeur);\r\napp.use(\"/api/orders\", order);\r\napp.use(\"/api/rental\", orderRental);\r\napp.use(\"/api/airports\", airport);\r\napp.use(\"/api/data\", staticData);\r\napp.use(\"/api/blogs\", blog);\r\napp.use(\"/api/enquiries\", enquiry);\r\napp.get(\"/api/config/paypal\", (req, res) => {res.send(process.env.PAYPAL_CLIENT_ID); });\r\n\r\napp.use(\"/api/upload\", upload);\r\napp.use(\"/uploads\", express.static(path.join(__dirname, \"/uploads\")));\r\napp.get('/uploadtester',(req,res)=>{res.sendFile(__dirname +'/tests/uploadform.html')})\r\n\r\n// -----PANELS\r\napp.use('/admin', express.static('./admin')) // frontend admin static folder\r\napp.use('/driver', express.static('./driver')) // frontend driver static folder\r\napp.use('/utilities', express.static('./utilities')) // utilities\r\n\r\n\r\napp.get('/101fd5534aad34d24acdd10fb99d2523.html', (req, res) => res.status(200).send('')); //verification\r\n\r\nvar frontend_dir='home/' \r\nif (process.env.NODE_ENV=='dev') {\r\n  console.log('THIS IS DEVELOPMENT SERVER')\r\n  app.get('/api/info', (req, res) => res.send({dburl:process.env.MONGO_URI}));\r\n  // frontend_dir='home-src/public/'\r\n}\r\n\r\n// -----REACT RESOLVER\r\napp.use(express.static(path.join(__dirname,frontend_dir)));\r\napp.get('*', (req, res) => res.sendFile(path.join(__dirname,frontend_dir+'index.html')));\r\n\r\n// Custom Error handling\r\napp.use(fileupload());\r\napp.use(notFound);\r\napp.use(errorHandler);\r\n\r\nconst PORT = process.env.PORT || 5000;\r\napp.listen(PORT,\r\n  console.log(`Server running in ${process.env.NODE_ENV} mode on port ${PORT}`)\r\n);\r\n"],"file":"app.dev.js"}