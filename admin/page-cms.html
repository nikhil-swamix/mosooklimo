<!--
=========================================================
* Material Dashboard 2 - v3.0.1
=========================================================

* Product Page: https://www.creative-tim.com/product/material-dashboard
* Copyright 2022 Creative Tim (https://www.creative-tim.com)
* Licensed under MIT (https://www.creative-tim.com/license)
* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="./assets/img/apple-icon.png">
  <link rel="icon" type="image/png" href="./assets/img/favicon.png">
  <title>
    Mosooklimo Dashboard
  </title>

  <!-- Font Awesome Icons -->
  
  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
  <!-- CSS Files -->
  <!--  -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="./assets/js/swamix.js" type="text/javascript" charset="utf-8" ></script>
  <link href="./assets/css/swamix.css" rel="stylesheet" /> 
  <link id="pagestyle" href="./assets/css/material-dashboard.css" rel="stylesheet" />

</head>

<body class="g-sidenav-show  bg-gray-200">

  <aside data-load="components/sidemenu.html" class="sidenav  navbar-vertical navbar-expand-xs   fixed-start   bg-gradient-light" id="sidenav-main"></aside>

  <main class="main-content position-relative  border-radius-lg p-lg-3">
    <!-- Navbar -->
    <div class="btn-group btn-group-sm" role="group" aria-label="Basic outlined example">
      <button type="button" class="btn btn-warning p-1 py-0">Module</button>
      <button type="button" class="btn btn-outline-warning p-1 py-0">Content Management System (CMS)</button>
    </div>

    <br>
    <div id="viewcontroller" class="btn-group btn-group-sm" role="group" aria-label="View Toggler">
      <button id-binding="about" state="active" class="btn btn-warning">ABOUT US</button>
      <button id-binding="privacy" state="inactive" class="btn btn-outline-warning">PRIVACY POLICY</button>
      <button id-binding="terms" state="inactive" class="btn btn-outline-warning">T&C</button>
      <button id-binding="about" state="inactive" class="btn btn-outline-warning">DISCLOSURE</button>
    </div>
    <script type="text/javascript">
      $('#viewcontroller button').click(function(event) {
        $(this).addClass('btn-warning');
        $(this).siblings().removeClass('btn-warning');
        $(this).siblings().addClass('btn-outline-warning');
        var target=$("#"+$(this).attr('id-binding'))
        target.removeAttr('hidden')
        target.siblings().attr('hidden', '')

      });

      $('[aria-label="View Toggler"] button').hover(function() {
        $(this).addClass('bg-black');
      }, function() {
        $(this).removeClass('bg-black');
      });
    </script>


    <section id="viewer">
      <div class="v-page" id="about">
        <div class="pb-3">
          <h2>About Title</h2>
          <input id="at" data-dbattribute="aboutTitle" type="text" name=""><br>
          <button onclick="submitField(this)" class="small green button mt-2">Submit</button>
        </div>

        <div class="pb-3">
          <h2>About Paragraph 1</h2>
          <textarea id="at1" data-dbattribute="aboutSub1" type="text" name="" rows="5" cols="80"> </textarea> <br>
          <button onclick="submitField(this)" class="small green button">Submit</button>
        </div>

        <div class="pb-3">
          <h2>About Paragraph 2</h2>
          <textarea id="at2" data-dbattribute="aboutSub2" type="text" name="" rows="5" cols="80"></textarea> <br>
          <button onclick="submitField(this)" class="small green button">Submit</button>
        </div>
      </div>

      <div class="v-page" id="privacy" hidden>
        <div class="pb-3">
          <h2>Privacy Title</h2>
          <textarea data-dbattribute="privacyTitle" type="text" name="" rows="5" cols="80"></textarea> <br>
          <button onclick="submitField(this)" class="small green button">Submit</button>
        </div>
        <div class="pb-3">
          <h2>Privacy Description</h2>
          <textarea data-dbattribute="privacyDescription" type="text" name="" rows="5" cols="80"></textarea> <br>
          <button onclick="submitField(this)" class="small green button">Submit</button>
        </div>
      </div>      


      <div class="v-page" id="terms" hidden>
        <div class="pb-3">
          <h2>Terms Title</h2>
          <textarea data-dbattribute="termsTitle" type="text" name="" rows="5" cols="80"></textarea> <br>
          <button onclick="submitField(this)" class="small green button">Submit</button>
        </div>
        <div class="pb-3">
          <h2>Terms Traveller</h2>
          <textarea data-dbattribute="termsDescriptionTraveller" type="text" name="" rows="5" cols="80"></textarea> <br>
          <button onclick="submitField(this)" class="small green button">Submit</button>
        </div>
        <div class="pb-3">
          <h2>Terms Title</h2>
          <textarea data-dbattribute="termsDescriptionTransportation" type="text" name="" rows="5" cols="80"></textarea> <br>
          <button onclick="submitField(this)" class="small green button">Submit</button>
        </div>
      </div>      

      <div class="v-page" id="privacy" hidden>
        <div class="pb-3">
          <h2>Disclosure Title</h2>
          <textarea data-dbattribute="disclosureTitle" type="text" name="" rows="5" cols="80"></textarea> <br>
          <button onclick="submitField(this)" class="small green button">Submit</button>
        </div>
        <div class="pb-3">
          <h2>Disclosure Description</h2>
          <textarea data-dbattribute="disclosureDescription" type="text" name="" rows="5" cols="80"></textarea> <br>
          <button onclick="submitField(this)" class="small green button">Submit</button>
        </div>
      </div>

    </section>
  </main>

  <script type="text/javascript">
    dataurl="/api/data"

    loadDataToFields = AJAX('GET', '/api/data', "", async (data) => {
      data=data.pop()
      window._id=data._id
      $('[data-dbattribute]').each(function(index, el) {
        var $el=$(el)
        $el.val(data[$el.data('dbattribute')])
      });
      return 1
    })

    submitField = (el) => {
      var $el = $(el)
      var inputang = $el.siblings('[data-dbattribute]').eq(0)
      var postdata = { [inputang.data('dbattribute')] : inputang.val() }
      AJAX('PUT', `/api/data/${window._id}`, postdata, () => Swal.fire("Updated", 'data has been changed, go to the appropriate page to see the changes', 'success')) 
    }
  </script>
  
  <!--   Core JS Files   -->
  <script async src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <script src="./assets/js/core/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

  <script type="text/javascript">
    rememberTab = $(document).ready(function() {
      $('#myTabs button').click(function(event) {
        id=$(this).attr('id');
        console.log(id)
        localStorage.setItem('settings.defaultTab','#'+id)
      });
      $(localStorage.getItem('settings.defaultTab')).tab('show')
    });
  </script>
  <!-- Github buttons -->

  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="./assets/js/material-dashboard.js"></script>
  <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900|Roboto+Slab:400,700" />

</body>

</html>