<!doctypehtml><html lang=en><head><meta charset=utf-8><meta content=width=device-width,initial-scale=1,shrink-to-fit=no name=viewport><link href=./assets/img/apple-icon.png rel=apple-touch-icon sizes=76x76><link href=./assets/img/favicon.png rel=icon type=image/png><title> Material Dashboard </title><link href=https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900|Roboto+Slab:400,700 rel=stylesheet><link href=https://fonts.googleapis.com/icon?family=Material+Icons+Round rel=stylesheet><script crossorigin=anonymous integrity=sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4= src=https://code.jquery.com/jquery-3.6.0.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.0/jquery.validate.min.js></script><script charset=utf-8 src=./assets/js/swamix.js type=module></script><link href=https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css rel=stylesheet><script src=https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js></script><link href=./assets/css/swamix.css rel=stylesheet><link href=./assets/css/material-dashboard.css?v=3.0.1 id=pagestyle rel=stylesheet><link crossorigin=anonymous href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css integrity=sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g== referrerpolicy=no-referrer rel=stylesheet></head><style>body{background-image:linear-gradient(rgba(0,0,0,.7),rgba(0,0,0,.7)),url(https://www.wharftt.com/wp-content/uploads/2021/04/feat-1.jpg);background-size:cover}main{height:100vh}#bookingtable{opacity:.9}</style><body class="g-sidenav-show bg-gray-200"><aside class="sidenav navbar navbar-vertical navbar-expand-xs border-0 fixed-start bg-gradient-light"id=sidenav-main><div class="sidenav-header bg-gradient-dark"><i class="fas fa-times p-3 cursor-pointer text-white opacity-5 position-absolute end-0 top-0 d-none d-xl-none"aria-hidden=true id=iconSidenav></i><a class="navbar-brand m-0"href=" ./ "target=_blank> <img class="navbar-brand-img h-100"alt=main_logo src=https://mosooklimo.com/wp-content/uploads/2021/11/limo.JPEG-1-3.png> <span class="ms-1 font-weight-bold text-warning">MosookLimo</span> </a></div><hr class="horizontal light mt-0 mb-2"><div class="collapse navbar-collapse w-auto"id=sidenavid><ul class=navbar-nav><li class=nav-item><a class="nav-link text-black"href=/admin/index.html> <div class="text-warning text-center me-2 d-flex align-items-center justify-content-center"><i class="material-icons opacity-10">dashboard</i></div> <span class="nav-link-text ms-1">Dashboard</span> </a></li><li class=nav-item><a class="nav-link text-black"href=page-bookings.html> <div class="text-warning text-center me-2 d-flex align-items-center justify-content-center"><i class="material-icons opacity-10">receipt_long</i></div> <span class="nav-link-text ms-1">Manage Bookings</span> </a></li><li class=nav-item><a class="nav-link text-black"href=page-airports.html> <div class="text-warning text-center me-2 d-flex align-items-center justify-content-center"><i class="material-icons opacity-10">flight</i></div> <span class="nav-link-text ms-1">Airports</span> </a></li><li class=nav-item><a class="nav-link text-black"href=page-chauffeur-management.html> <div class="text-warning text-center me-2 d-flex align-items-center justify-content-center"><i class="material-icons opacity-10">supervisor_account</i></div> <span class="nav-link-text ms-1">Chauffeur</span> </a></li><li class=nav-item><a class="nav-link text-black"href=./page-cms.html> <div class="text-warning text-center me-2 d-flex align-items-center justify-content-center"><i class="material-icons opacity-10">history_edu</i></div> <span class="nav-link-text ms-1">CMS</span>  </a></li><li class=nav-item><a class="nav-link text-black"href=page-enquiry-management.html> <div class="text-warning text-center me-2 d-flex align-items-center justify-content-center"><i class="material-icons opacity-10">question_answer</i></div> <span class="nav-link-text ms-1">Enquiries</span> </a></li><hr><li class=nav-item><h6 class="ps-4 ms-2 text-uppercase text-xs text-warning font-weight-bolder opacity-8">Account pages</h6></li><li class=nav-item><a class="nav-link text-black"href=profile.html> <div class="text-warning text-center me-2 d-flex align-items-center justify-content-center"><i class="material-icons opacity-10">person</i></div> <span class="nav-link-text ms-1">Profile</span> </a></li><li class=nav-item><a class="nav-link text-black"href=sign-in.html onclick=localStorage.removeItem('jwt');window.location='./sign-in.html'> <div class="text-warning text-center me-2 d-flex align-items-center justify-content-center"><i class="material-icons opacity-10">next_plan</i></div> <span class="nav-link-text ms-1">Log Out</span> </a></li></ul></div><script>DEBUGGING=0,$("#sidenavid .nav-item").each(function(i,a){a=$(a).find("a"),a.length&&window.location.pathname.endsWith(a.attr("href"))&&(a.addClass("active text-dark bg-gradient-warning"),DEBUGGING&&console.log("SIDEMENU.HTML>>",a.attr("href")))});</script></aside><main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg"><nav class="navbar navbar-main navbar-expand-lg px-0 shadow-none border-radius-xl"id=navbarBlur navbar-scroll=true><div class="container-fluid py-1 px-3"><nav aria-label=breadcrumb><ol class="breadcrumb bg-transparent mb-0 pb-0 pt-1 px-0 me-sm-6 me-5"><li class="breadcrumb-item text-sm text-white"><a class="opacity-5 text-white"href=javascript:;>Pages</a></li><li class="breadcrumb-item text-sm text-white active"aria-current=page>Bookings</li></ol></nav><div class="collapse navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4"id=navbar></div></div></nav><section id="adminbookingform "><link href=https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css rel=stylesheet><script crossorigin=anonymous integrity=sha512-+xuLsxQN3JBrnBSAr/vOlUqZfQ0OwpqZfdbuiQVpzjd5Y85F8F2AyzP4YNVDrpR29EolzELxc62br5gWK51phQ== referrerpolicy=no-referrer src=https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.16/js/intlTelInput-jquery.min.js></script><script src=http://maps.google.com/maps/api/js?sensor=false&libraries=places&language=en-AU></script><style>.blink_me{animation:blinker .1s linear infinite}@keyframes blinker{50%{opacity:0}}.elem-group label{color:#344767}</style><div class="modal fade"aria-hidden=true aria-labelledby=exampleModalLabel id=exampleModal tabindex=-1><div class=modal-dialog><div class=modal-content><div class=modal-header><h3 class=modal-title id=exampleModalLabel>Admin Booking</h3><button class="btn-close text-danger"aria-label=Close data-bs-dismiss=modal type=button></button></div><div class="modal-body mb-0 pb-0"><div class="flex-row-reverse d-flex"><button class="btn btn-secondary text-white py-0 my-0"id=testbtn onclick=autofill()>Test</button></div><form id=bookingform><div class=row><div class=col-auto><div class="elem-group mt-1"><label class=my-0 for=name>User Name</label><br><input id=name name=visitor_name pattern=[A-Z\sa-z]{3,20} required></div><div class="elem-group mt-1"><label class=my-0 for=email>User E-mail</label><br><input id=email name=visitor_email required type=email></div><div class="elem-group mt-1"><label class=my-0 for=paddress>Pickup Address</label><br><input id=paddress name=paddress required></div><div class="elem-group mt-1"><label class=my-0 for=daddress>Destination Address</label><br><input id=daddress name=daddress required></div><div class="elem-group mt-1"><label class=my-0 for=phone>User Phone</label><br><input id=phone name=visitor_phone pattern=(\d{3})-?\s?(\d{3})-?\s?(\d{4}) required type=tel><script></script></div></div><div class="col-auto mr-auto"><div class="elem-group mt-1"><label class=my-0 for=adult>No. of Adults</label><br><input id=adult min=1 name=total_adults required type=number></div><div class="elem-group mt-1"><label class=my-0 for=baggage>No. of Baggage</label><br><input id=baggage min=0 name=total_baggage required type=number></div><div class="elem-group mt-1"><label class=my-0 for=checkin-date>Pickup Date</label><br><input id=checkin-date max=2999-12-31 min=2022-01-01 name=checkin-date required type=date><script>var tomorrow=new Date;tomorrow.setDate(tomorrow.getDate()+1),$("#checkin-date").attr("min",tomorrow.toJSON().slice(0,10));</script></div><div class="elem-group mt-1"><label class=my-0 for=checkin-time>Pickup Time</label><br><input id=checkin-time name=checkin-time required step=60 type=time></div><div class="elem-group mt-2"><label class=my-0 for=carclass>Car Class</label><br><select class=p-1 id=carclass name=carclass required><option value=economy>economy</option><option value=sedan>sedan</option><option value=business>business</option><option value=minivan>minivan</option><option value=minibus>minibus</option><option value=suv>suv</option><option value=luxury>luxury</option></select></div></div></div><div class="row px-0 pt-3"><h3>Add-Ons</h3><div class=col-4><div class="form-check px-0"><input class=form-check-input id=addonMeetGreet type=checkbox><br><label class=form-check-label for=flexCheckDefault><i class="fa-solid fa-people-carry-box"></i> Meet & Greet</label></div></div><div class=col-4><div class="form-check px-0"><input id=addonPets max=2 min=0 type=number value=0><label class=form-check-label for=flexCheckDefault><i class="fa-solid fa-dog"></i> Pets Count</label></div></div><div class=col-4><div class="form-check px-0"><input id=addonExtraRoute max=3 min=0 type=number value=0><label class=form-check-label for=flexCheckDefault><i class="fa-solid fa-arrows-split-up-and-left"></i> Extra Stops</label></div></div><div class=col-4><div class="form-check px-0"><input id=addonBabySeat max=2 min=0 type=number value=0><label class=form-check-label for=flexCheckDefault><i class="fa-solid fa-baby"></i> Baby Seats</label></div></div><div class=col-4><div class="form-check px-0"><input id=addonBoosterSeat max=2 min=0 type=number value=0><label class=form-check-label for=flexCheckDefault><i class="fa-solid fa-child"></i> Booster Seats</label></div></div><div class=col-4><div class="form-check px-0"><input id=addonSpecialLuggage max=2 min=0 type=number value=0><label class=form-check-label for=flexCheckDefault><i class="fa-solid fa-cart-flatbed"></i> Special Luggage</label></div></div></div><div class="modal-footer pb-0"><button class="btn btn-secondary"data-bs-dismiss=modal type=button>Close</button><button class="btn btn-success"onclick=submitOrder()>Submit</button></div></form></div><script>function setCountryPhone(o){$("#phone").selectCountry(o)}phoneInstance=$("#phone").intlTelInput({allowDropdown:!0,autoHideDialCode:!0,autoPlaceholder:"polite",customPlaceholder:null,dropdownContainer:null,excludeCountries:[],formatOnDisplay:!0,geoIpLookup:null,hiddenInput:"",initialCountry:"",localizedCountries:null,nationalMode:!0,onlyCountries:[],placeholderNumberType:"MOBILE",preferredCountries:["us","gb","in","ae"],separateDialCode:!1,utilsScript:""});function futureDate(){var o=new Date;return o.setDate(o.getDate()+Math.floor(Math.random()*100)),o.toJSON().slice(0,10)}function autofill(){$("#testbtn").append('<i class="fa-solid fa-spinner blink_me"></i>');let o=$.get("https://api.mockaroo.com/api/7fc66d10?count=1&key=25c55040",function(e){console.log(e),e=e[0];let a=e.fromTime;e.fromTime.toString().length<5&&(a="0"+a),$("#name").val(e.name),$("#email").val(e.email),$("#paddress").val(e.pickupAddress),$("#daddress").val(e.destinationAddress),$("#phone").val(e.phone),$("#adult").val(Math.floor(Math.random()*5)+1),$("#baggage").val(Math.floor(Math.random()*5+1)),$("#checkin-date").val(futureDate),$("#checkin-time").val(a),$("#carclass").val($("#carclass option").slice(1)[Math.floor(Math.random()*$("#carclass option").slice(0).length)].value),$("#testbtn i").remove()})}function validateform(){return $("#bookingform input").each(function(o,e){if(console.info(e,e.checkValidity()),!e.checkValidity())return!1}),!0}$("form button").on("click",function(o){o.preventDefault()});function submitOrder(){!validateform()||(postdata={pickupAddress:$("#paddress").val(),destinationAddress:$("#daddress").val(),bookingDate:`${$("#checkin-date").val()}`,bookingTime:`${$("#checkin-time").val()}:00`,noOfPassenger:$("#adult").val(),noOfLuggage:$("#baggage").val(),isRoundTrip:!0,rBookingDate:"",rBookingTime:"",distance:10,vehicleClass:$("#carclass").val(),price:25,meetGreet:$("#addonMeetGreet").is(":checked"),noOfBabySeat:$("#addonBabySeat").val(),noOfBoosterSeat:$("#addonBoosterSeat").val(),noOfSpecialLuggage:$("#addonSpecialLuggage").val(),noOfPets:$("#addonPets").val(),noOfExtraStop:$("#addonExtraRoute").val(),isBookingForSomeone:!0,passengerName:"",passengerCountryCode:"",passengerPhone:"",passengerEmail:"",email:$("#email").val(),name:$("#name").val(),countryCode:$(".iti ul [aria-selected=true]").data("dial-code"),phone:$("#phone").val(),flightNo:"",countryOfResidence:"",remarks:""},$.ajax({type:"POST",contentType:"application/json",url:"/api/orders/",data:JSON.stringify(postdata),headers:{Authorization:`Bearer ${localStorage.getItem("jwt")}`},dataType:"json",success:(o,e,a)=>{console.log(o),Swal.fire("Booked Successfully").then(()=>location=location)},error:(o,e,a)=>{console.log(o),Swal.fire("Request Has Failed",JSON.stringify(o.responseJSON.message),"error")}}))}</script></div></div></div></section><section><style>#texample td{max-width:50px}</style><div class="py-0 mx-3"id=bookingtable><div class=row><div class="col-md-12 mt-2"><div class=card><div class="card-header w-100 pb-0 px-3 row mx-0"><h3 class="col-auto px-0">All Bookings</h3><div class=px-0><button class="btn btn-success col ms-auto p-1 text-right my-0"data-bs-target=#exampleModal data-bs-toggle=modal type=button><span> <i class="fa-solid fa-feather-pointed"></i></span> Add Booking  </button><button class="btn btn-info col mx-auto p-1 d-inline my-0"id=zoom><i class="fa-solid fa-magnifying-glass"></i> Zoom</button><script>$("#zoom").click(function(e){$("table td").toggleClass("enlarge")});</script></div></div><div class="card-body px-2"id=car-list>Please Login !</div><script>console.log("Initializing Get Bookings List"),$(document).ready(function(){$.ajax({type:"GET",url:"/api/orders/",headers:{Authorization:`Bearer ${localStorage.getItem("jwt")}`},dataType:"json",success:(a,t,s)=>{console.log(a),loadOrdersToDashboard(a),mytable.DataTable({pageLength:50,retrieve:!0,select:!0,columnDefs:[{orderable:!1,targets:1}],order:[[7,"asc"],[1,"desc"]]})},error:(a,t,s)=>{Swal.fire("Failed to load bookings",JSON.stringify(a),"error")}})}),loadOrdersToDashboard=a=>{parentID="#car-list",$(parentID).empty(),tabletemplate=`
                        <table id="texample" class="display">
                          <thead>
                            <tr class="text-left">
                              <th>_id</th>
                              <th>Start On</th>
                              <th>Name</th>
                              <th>Info</th>
                              <th >Contact</th>
                              <th>Pickup</th>
                              <th>Destination</th>

                              <th>Trip</th>
                              <th>Payment</th>

                              <th>Actions</th>
                            </tr>
                          </thead>
                          <tbody>
                          </tbody>
                        </table>
                        `,mytable=$(tabletemplate),tablebody=mytable.find("tbody"),a.forEach(function(t){element=`
                        <tr data-json='${JSON.stringify(t)}'>
                          <td data-id="${t._id}">${t._id.slice(16)}</td>
                          <td>${t.bookingDate.slice(0,10)} <br> ${t.bookingTime}</td>
                          <td>${t.name}</td>
                          <td>
                            <i class="fa-solid fa-person"></i>${t.noOfPassenger}  <i class="fa-solid fa-suitcase-rolling"></i>${t.noOfLuggage}
                            ${t.vehicleClass}
                          </td>

                          <td >${t.phone} <br> ${t.email}</td>
                          <td>${t.pickupAddress}</td>
                          <td>${t.destinationAddress}</td>

                          <td data-status="${t.status}" onclick="toggleStatus(this)" data-sort="${t.status=="assigned"?1:t.status=="pending"?0:2}">

                            <span class="badge ${t.status=="assigned"?"bg-warning":t.status=="pending"?"bg-danger":"bg-success"}">
                              ${t.status}
                            </span>
                          </td>
                          
                          <td > <span class="badge ${t.isPaid?"bg-success":"bg-danger"}">${t.isPaid}</span></td>

                          <td>
                            <button class="btn btn-link text-danger text-gradient px-1 mb-0"  onclick="deleteBooking('${t._id}');">
                            <i class="material-icons text-sm me-2">delete</i>
                            </button>
                            <button class="btn btn-link text-dark px-1 mb-0" href="javascript:;" onclick="updateBooking('${t._id}');">
                            <i class="material-icons text-sm me-2">edit</i>
                            </button>
                          </td>
                        </tr>
                        `,tablebody.append(element),$(parentID).append(mytable)})},toggleStatus=a=>{oid=$(a).siblings().eq(0).data("id"),cstatus=$(a).data("status"),data={status:cstatus=="pending"?"assigned":cstatus=="assigned"?"done":"pending"},template=`
                    <span class="badge ${data.status=="assigned"?"bg-warning":data.status=="pending"?"bg-danger":"bg-success"}">
                      ${data.status}
                    </span>
                    `,AJAX("PUT",`/api/orders/${oid}`,data,success=()=>{$(a).html(template)})};</script></div></div></div></div></section></main><script crossorigin=anonymous integrity=sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM src=https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js></script><script async defer src=https://buttons.github.io/buttons.js></script><script src=./assets/js/material-dashboard.js></script><script src=//cdn.jsdelivr.net/npm/sweetalert2@11></script></body></html>